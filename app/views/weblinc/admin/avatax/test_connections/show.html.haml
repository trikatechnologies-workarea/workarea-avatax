- @title = ['AvaTax Test Connection']
- @selected_navigation_nodes = ['Store', 'AvaTax plug-in', 'Test Connection']

.avatax-test-connection-view.view
  %h1 AvaTax Test Connection
  = form_tag avatax_test_connection_url, method: :patch do
    .wl-tabs
      .section
        %h2 Test Connection
        - if @connection.errors.any?
          - @connection.errors.each do |message|
            .message.message--error
              %p.message__type
                %span.message__icon Error
              %p.message__text= message

        - else
          .message.message--success
            %p.message__type
              %span.message__icon Success
            %p.message__text #{@connection.status}

        - @settings.each do |field, value|
          .property
            = label_tag "settings[#{field}]", nil, class: 'name' do
              %span.text= field.to_s.titleize
            %br
            %span.text= value.to_s

    .form-actions
      .action-group
        .action-group__item
          = link_to 'Refresh', avatax_test_connection_url, class: 'icon-text-button icon-text-button--refresh'
        .action-group__item
          = link_to 'Edit Settings', avatax_settings_url, class: 'button'
